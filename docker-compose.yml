services:
  ghost-browser:
    build: .
    image: ghost-chrome-runner
    # FORCE AMD64: Google Chrome only exists for x86_64 linux
    platform: linux/amd64
    container_name: ghost-browser
    ports:
      - "3000:3000"
      - "9222:9222"
    volumes:
      - chrome_data:/data/chrome-profile
    environment:
      - CHROME_ARGS=--window-size=1920,1080
    # Increase shared memory size to prevent Chrome crashes
    shm_size: '2gb'
    restart: unless-stopped

volumes:
  chrome_data:
